#  在构建Aliyun业务中台系统的过程中我们会
《阿里研究员玄难：如何做电商业务中台》——阅后心得

发布日期：2016年4月26日

1. 每个业务平台都是一套“垂直”的体系。“垂直”意味着它有自己的领域模型。

每个平台的业务抽象建模和开放性设计。以资金账户为例，代金券、红包、现金、优惠券都是对一个特点业务的数字进行增、减以及相关流水的查询、审计，对代金券、红包、现金、优惠券的业务进行抽象的结果是形成了账本以及账本流水这两个核心模型，并期望这套抽象的模型就可以灵活支持各个业务线多种类型“资金”的交易。看上去挺美好的一种设计实际上并不这么“灵活”。各个业务的的交易规则是不一样的，先扣哪个、后扣哪个，发生退款的时候哪些是可以退的，哪些不可以退，能退多少，每个业务线都有自己的玩法。这个时候有两种纠结的方案：

1. 旁路型：把资金账户按细粒度的服务提供给各个业务方，让业务方按自己的业务规则进行定制。这种方案要解决交易事务一致性的这个技术难度，如果不能通过技术方案来实现远程交易的事务一致性，只能基于数据库事务来保证事务一致性，那么只能选择自己开发。另外，如果是让业务方通过开发实现业务定制，需要不断的联调、测试、上线配合，会增加双方的实施成本。
2. 直路型：每个业务来了我们自己做，但为了降低开发成本，构建一个交易流程规则系统，可以通过定义每种交易涉及的资金账本的优先级以及业务规则，实现0开发完成实现交易流程，这种方案不但降低了开发成本、而且为以后的交易规则开放给各个业务方自行定制打下了基础。我们通过业务抽象解决共性的80%问题，系统架构开放性解决20%的个性化问题
3. 开放型：接下来的业务发展，对业务模型有了更多的需求，比如币种、汇率、税等等，业务模型的改变对系统的影响很大，需要对原有系统进行重构(refactoring)，甚至是重构（rebuild）来满足需求。另外业务上需要进行更多的业务定制，原来的基于配置的规则系统存在很大的一个缺陷就是开放性不足。业务上个性化的需求日益增加，放性不足的问题越来越严重。需要突破的是系统架构的开放性。通过对业务模型的重建，平台能支撑更多类型的业务。另外，通过OpenAPI、业务领域语言等等使得平台的开放性有了很大的提升。

总而言之，每个业务平台把自己做的很强大是很很不容易的。


上面是某个平台在自己发展过程中需要经历的历程。假设每个垂直的平台都已经按自己的规划和领域模型建好了服务。那么业务线又会经历怎样的磨难呢？

1. 虽然每个业务平台都是为了支撑“交易”这个同一个场景，但每一个业务的执行都是要跨域的，往往需要对接会员、商品、批价、订单、支付等多个平台。每个平台的核心模型都是不一样的，业务系统需要练就软弱的身段才能在各个业务领域模型中游刃有余。想让业务方的接入能获得“如丝般的顺滑”需要服务的提供方提供“界面更友好”api，事实是服务的提供方一般都不关注使用方的感受，不同的平台的对象的入参、出餐、错误返回的格式都各玩各的，所以接入发的成本都很大。
2. 测试环境这块，抛开业务配置的问题（商品、批价等），需要我们自己能玩起了，不能依赖aone的那套体系来组织我们的测试环境了。我的想法是ECS的开发资源最多，有不少资源是投入到这个上面的，事实上他们做的也最好，我们需要像他们取取经、借鉴他们的好的成果。



对于开放的
1. 业务中台的建设目标是尽可能的去假想“我们的业务”由第三方来实现，商品、订单、common driver、sp、billing都需要提供自己的openapi。
2. 商品、批价的接入成本很高。有几方面的原因：
3. 	商品相关的概念事实就是很复杂，业务方的学习成本很高，特别是每个云产品接入都是不同的人，他想要了解接入的方案，还是会去咨询PD或开发，所以让二方产品的业务方自己去完成商业化的实施是不可能从根本上释放


每个业务平台。举例来说支付、订单、服务生命周期管理







