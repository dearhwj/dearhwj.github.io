---
layout: post
title: 《ThoughtWorks洞见－微服务文集》阅读笔记
category: 软件架构和设计
keywords: 微服务
---

## 摘要
1. 一个部门的变化往往会影响其他部门，因为每一个部门都需要知道业务的上游和下游，因此有比较紧密的耦合关系，无法独立变化。因此不足以称为Microservices；其次是业务调度员方式，此时部门自身的变化不会扩散到其他部门，因此是可以独立决定和操作，只要部门足够小，这种结构可以称之为Microservices了；第三是公司广播。这种方式下的部门耦合更加松散，可以独立进行变化，在部门足够小的前提下可以称之为
2. 每一个MicroService 可以进行独立部署; 每一个 Service 都足够小，完成完整的定义清晰的职责; 业务调度员和公司广播两个例子的组织结构都可以成为Microservices架构。但是他们之间并没有绝对的优劣之分。选用哪一种应当取决于实际要求
3. 在Martin Fowler的定义中有几个关键字可以让我们甄别一个分布式架构是传统的面向服务架构还是新的 微服务架构:每个服务是不是跑在独立的进程中?是不是采用轻量级的通讯机制
4. 微服务架构的好处1——组件化。首先是组件化，作为一个软件开发人员，其实我们一直都有一个梦想，就是希望有朝一日可以把一堆的组件像乐高一样通过直接拼装的方式快速构建我们的应用。微服务架构为我们提供了一种组件化的可能，但直到现在还不好说它能不能达到我们作为整体组件化的目标，但是至少从我们的实际体验来看，它确实能给我们带来组件化的很多好处。
5. 微服务架构的好处2——去中心化和快速响应也是微服务架构给我们带来的好处。以前的架构模式会非常依赖于项目一开始对技术的选择，一旦选择了一个技术栈，之后几年都会被绑定在这样一个技术栈下，很难应对变化。在不同的服务里可以使用完全不同的技术栈、不同的语言、框架甚至数据库，真正做到用最适合的技术解决最适合的问题，从而让我们可以更加敏捷地响应需求和市场的变化，提高了竞争力。
6. Martin Fowler在他的《企业应用架构模式》中，就提到了分布式对象设计的第一原则:“设计分布式对 象的第一个原则就是不要使用分布式对象”。因为分布式系统会给我们带来很大的挑战，让系统复杂度 大幅增加的同时，我们还需要面对开发环境、测试、部署、运维、监控、一致性和事务等一系列的问题
7. 康威定律说的是设计系统的组织产生的设计和架构等价于组织间的沟通结构。而康威定律还有一个逆定
 律:如果想改变一个设计架构方式，首先要改变组织结构。
8. 为什么需要微服务：互联网是一个快鱼吃慢鱼的时代，也是所有行业中竞争最激烈、变化最快的行业。企业在这个过程中需要将适应业务快速发展能力集成到人、流程和技术这3个领域 。技术的敏捷性不能被忽略——敏捷的团队和流程不能弥补笨重技术带来的缺陷。技术:包括团队组织结构，流程和实践(如DevOps)，以及重新调整架构以适应我们要解决的问题，而 并非纯技术层面。微服务促进了每个领域的适应性。它值得管理层花时间去了解其潜在的
9. 服务架构风格的特性是由一组极小的服务组成，它们彼此独立且单独部署。微服务由Netflix这样的公 司推广开来。每个服务包含一个离散的业务功能，它在技术上与其他服务相隔离，产生了类似乐高积木 的效果:开发人员可以将服务切换为一个新的服务，而无需破坏其他。
10. 微服务的好处
	11. 首先，每个服务与其他服务高度解耦，这意味着它们是自包含的。因此， 一个服务中的技术更改(例如数据结构更改)不会影响另一个服务。服务仍然可以通过消息传递进行通 信，但是任何一个服务都不允许修改另一个服务的实现细节
	12. 开发人员不需要共享基础设施， 他们可以选用适合于该问题复杂度的技术栈来实现每一个服务。 考虑到当今技术栈的复杂性，在同一应用程序中，使用简单工具处理简单问题和使用复杂工具处理 复杂问题的能力使开发团队在增加了灵活性的同时也降低了成本。 

	12. 每个服务封装了业务功能，它更容易促成围绕特定问题域的团队。例如， 服务团队通常包括开发人员、业务分析师、DBA、运维人员和QA— 即构建和部署服务所需的一切角色。 这样一来便降低了协调成本。
13. 微服务架构风格与许多企业部署软件和分配IT资源的方式相反。许多架构风格的主要目标之一是有效地 利用共享资源(操作系统、数据库服务器、应用程序服务器等)。由于资源的成本影响了底线，因此这 些公司建立了软件架构以最大化共享。
14. 微服务中的容器是领域驱动设计(DDD)中边界上下文的物理表现:每个容器代表了一层封装，以防止 实现细节干扰系统的其他部分。边界上下文提供的隔离展示了结构化软件架构的不同方式。分层结构仍然存在，但是其耦合边界是领域的边界，它将技术架构归入实现细节，并用领域对其进行封装。
15. 简单来讲，你可以将微服务理解成正确的SOA。一种将一组小型服务做成一个单独应用的开发方式，每一个小型服务在其独自的进程中运行，使用诸如 HTTP资源API等其他轻量级方式进行通信。重点是要轻量级。
16. 微服务的另外一个特点是，这些服务是按照业务能力构建的。之前我们经常掉入一个陷阱，就是总是从系统的角度思考问题，而不是从业务角度。现在我们不仅要有思考系统的能力，更要具备思考业务的能力。除此之外，我们还需要按照业务能力来组织工作。对于业务部门而言，如何实现并不重要，他们所关心的是系统长什么样子，怎么能方便用户使用。业务部门是这么思考的，我们也需要围绕业务能力进行设计。
17. 微服务中的各个服务个体是可以独立扩展的，也就是说如果某个服务上的需求量猛增，我们只需要该服务即可，与其他服务无关。
18. 在微服务架构中，因为我们有很多独立的单元，它们需要独自进行部署，因此我们真心离不开自动构
 建、自动化部署和持续交付这些基础。
19. 我们并不建议在一个崭新的项目中一开始就使用微服务进行开发。因为你很可能并不真的理解业务领域，也很难理解各个服务的边界。因此在这种项目中，可以先做成单块的，进行适当的模块化，加深理解之后再考虑演进成微服
20. 作为划分服务边界的第一个提示便是:尝试按照领域驱动设计的方式来思考服务的边界应该从业务能力的角度来思考服务的边界。
21. 我们发现如果你始终沿着方便测试的方向设计架构，最后的架构会更加简洁。所以“严格执行持续交付”是微服务架构赖以成功之根本。关于持续交付的内容，比如基础设置自动化，自动化部署，自动化测试等等都缺一不可。拿自动化测试举例，与传统架构相比，你的测试场景会更加复杂，甚至就连程序主路径这一个方面都要比原来负责很多，因此测试就显得至关重要。
22. 微服务的发展阶段。![](/images/microservice_development_process.png)



               
 

